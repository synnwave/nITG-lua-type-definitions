local fs = require("@lune/fs")
local net = require("@lune/net")

require("api/makeApi")
local jsonData = net.jsonDecode(fs.readFile("scripts/api/nITG-API.json"))
local externalApi = require("api/externalApi")

local xmlPath = "lua/layout.xml"
if not fs.isFile(xmlPath) then xmlPath = nil end

local output = [[
--# selene: allow(unused_variable)


-- This file was @generated by a script.
--> lune run scripts/generate
]]

--> Export
fs.writeFile("scripts/_nITG-luau-defs.d.luau", output .. require("api/luau-api")(jsonData, externalApi, xmlPath))
fs.writeFile("scripts/_nITG-emmylua-defs.lua", output .. require("api/emmylua-api")(jsonData, externalApi, xmlPath))
